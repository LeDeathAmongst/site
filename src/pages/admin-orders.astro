---
import Layout from "../layouts/Layout.astro";

const title = "Admin Orders - Rosie";
const description = "Admin Orders Page";
const ogTitle = "Admin Orders - Rosie";
---

<Layout
  title={title}
  description={description}
  ogTitle={ogTitle}
>
  <h1>Admin Orders</h1>
  <div class="orders-container" id="orders-container"></div>

  <script>
    // Fetch orders from the server
    fetch('/admin-orders')
      .then(response => response.json())
      .then(orders => {
        const ordersContainer = document.getElementById('orders-container');
        orders.forEach(order => {
          const orderCard = document.createElement('div');
          orderCard.className = 'order-card';
          orderCard.innerHTML = `
            <h2>Order ID: ${order.orderId}</h2>
            <p><strong>Name:</strong> ${order.name}</p>
            <p><strong>Email:</strong> ${order.email}</p>
            <p><strong>Description:</strong> ${order.description}</p>
            <p><strong>Price:</strong> $${order.price}</p>
            <p><strong>Payment Method:</strong> ${order.paymentMethod}</p>
            <p><strong>Submitted At:</strong> ${order.submittedAt}</p>
          `;
          ordersContainer.appendChild(orderCard);
        });
      })
      .catch(error => {
        console.error('Error fetching orders:', error);
      });
  </script>
</Layout>

<style>
  .orders-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 2rem;
  }
  .order-card {
    background: #1a1a1a;
    color: #fff;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    max-width: 300px;
    flex: 1;
  }
  .order-card h2 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }
  .order-card p {
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }
</style>
